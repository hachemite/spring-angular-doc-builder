<div class="min-h-screen bg-gray-50 p-8">

  <div class="max-w-6xl mx-auto">

    <div class="flex justify-between items-center mb-6">
      <div>
        <h1 class="text-3xl font-bold text-gray-900 tracking-tight">Template Management</h1>
        <p class="text-gray-500">Manage your document templates.</p>
      </div>

      <button mat-raised-button color="primary" routerLink="/admin/builder">
        <mat-icon>add</mat-icon> Create New Template
      </button>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">

      <div *ngIf="loading" class="p-8 text-center text-gray-500 flex flex-col items-center gap-2">
        <mat-spinner diameter="30"></mat-spinner>
        <span>Loading templates...</span>
      </div>

      <div *ngIf="!loading && templates.length === 0" class="p-12 text-center flex flex-col items-center">
        <mat-icon class="text-6xl text-gray-300 h-16 w-16 mb-4">folder_off</mat-icon>
        <h3 class="text-xl font-medium text-gray-700">No Templates Found</h3>
        <p class="text-gray-500 mb-6">Get started by creating your first document template.</p>
        <button mat-stroked-button color="primary" routerLink="/admin/builder">Create Template</button>
      </div>

      <table mat-table [dataSource]="templates" *ngIf="!loading && templates.length > 0">

        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef class="w-16"> ID </th>
          <td mat-cell *matCellDef="let element" class="text-gray-500 font-mono text-xs"> #{{element.id}} </td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let element" class="font-medium text-gray-800"> {{element.name}} </td>
        </ng-container>

        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef class="hidden md:table-cell"> Description </th>
          <td mat-cell *matCellDef="let element" class="hidden md:table-cell text-gray-500">
            {{element.description || 'No description'}}
          </td>
        </ng-container>

        <ng-container matColumnDef="active">
          <th mat-header-cell *matHeaderCellDef class="w-24"> Status </th>
          <td mat-cell *matCellDef="let element">
            <span class="px-2 py-1 rounded-full text-xs font-semibold"
                  [ngClass]="element.active ? 'bg-red-100 text-red-700'  :  'bg-green-100 text-green-700'">
              {{ element.active ? 'Inactive' :  'Active' }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="text-right"> Actions </th>
          <td mat-cell *matCellDef="let element">
            <div class="flex justify-end gap-2">
              <button mat-icon-button color="primary"
                      (click)="editTemplate(element.id)"
                      matTooltip="Edit Template">
                <mat-icon>edit</mat-icon>
              </button>

              <button mat-icon-button color="warn"
                      (click)="deleteTemplate(element.id)"
                      matTooltip="Delete Template">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-50 transition-colors border-b border-gray-100"></tr>
      </table>

    </div>
  </div>
</div>
